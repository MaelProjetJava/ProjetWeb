<!DOCTYPE html>
<html>
<head>
	<title>Projet Map</title>
	<meta charset="utf-8">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
		<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
   			integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
   			crossorigin=""></script>
   <link rel="stylesheet" href="web.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


<script src="db.js"></script>


</head>
<body>

<div class="container">
	<div class="row-md-4" >
		<div class="card card-body">
			<div class="col" style="text-align:center">
				Titre 
			</div>
		</div>
	
	</div>

	<div class="row" >
				
				<div class="col-md-2" >
					<
					<div class="card card-body ">
	
						<div class="lien"> lien 1 </div>

						<div class="lien"> lien 2</div>

						<div class="lien"> lien 3 </div>

						<div class="lien" > lien 4 </div>

					</div>
	
		
				</div>

				<div class="col-md-10" >
					<div class="card card-body">
						<div class="card card-body" id="onglet">
							<div class="row" >
							

								<div  class="col-md-4 onglet"> <span id="titre1" >MAP </span></div>

								<div class="col-md-4 onglet"> <span id="titre2" > STATS </span> </div>

								<div class="col-md-4 onglet" > <span id="titre3" > - - - - </span> </div>
								
							</div>
				

						</div>
						<div id=carte>

						<div class="row" >
							<div class="col-md-12" >
								<div id="mapid"> </div>
							</div>
						</div>

						<div class="row" >
							<div class="col-md-12" >
						
	
								 <form id="data" role="form">
								 	<div class="card card-body">
								 		<div class="form-row">
								 			<div class="form-group col-md-6">
												     <label for="date">Date d'apparition</label>
												    <input class="form-control" type="date" id="date" name="date">
											
											</div>
											<div class="form-group col-md-6">
												
											        <label for="time">Heure d'apparition</label>
											        <input class="form-control" type="time" id="time" name="time">
											    
											</div>
										</div>
										<div class="form-row">
								 			<div class="form-group col-md-6">
											   
											        <label for="area"> Lieu d'apparition</label>
											        <input  class="form-control" type="text" id="area" name="area">
											    
									    	</div>
										    <div class="form-group col-md-6">
											   
											        <label for="duration">Durée d'apparition</label>
											        <input  class="form-control" type="time" id="duration" name="duration" step="2">
											   
											</div>
										</div>
										<div class="form-row">
											<div class="form-group col-md-6">
											   
											        <label for="shape">Forme</label>
											        <input  class="form-control" type="text" id="shape" name="shape">

											       <br/>
											    <div class="form-row">    
													<div class="form-group col-md-12">
														<button type="submit" class="btn btn-primary"   >Modifier</button>
													</div>
												</div>
											    
											</div>
											<div class="form-group col-md-6">
											    
											        <label for="comments">Commentaire</label>
											        <textarea   class="form-control" id="comments" name="comments"  rows="5" cols="33"> </textarea>
											</div>
										
											    
										</div>

										
									</div>
								</form>
								<button id="test" >ajout des points </button>
													
							</div>

						</div>
						</div>

						<div id="stat">
								bonjour
						</div>

					</div>
	
				</div>


		
	
	</div>





		
</div>
		

 <script >var mymap = L.map('mapid').setView([51.505, -0.09], 13);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(mymap);

$("#stat").hide();
$(document).ready(function(){
  $("#titre1").click(function(){

		$("#carte").show();
		$("#stat").hide();

	});
    $("#titre2").click(function(){

		$("#carte").hide();
		$("#stat").show();

	});

        $("#titre3").click(function(){
        	window.location="404.html";


	});
        $(".lien").click(function(){
        	window.location="404.html";


	});
        $('#data').submit(function(event) {
        	event.preventDefault();
        	/*console.log("date=" +$('#date').val());
        	console.log("heure=" +$('#time').val());
        	console.log("duree=" +$('#duration').val());*/


        })


$("#test").click(function(){
	
	getAllSightings(ajouterLesPoints);

});

	
});
 
//var mar=new Array();

function ajoutpoint(e) 
{
	//pensée a le mettre dans la base de données 
	
	var lat=e.latlng.lat;
	var lng=e.latlng.lng;


   mar=L.marker([lat,lng]).addTo(mymap);

   //console.log(mar);
   mar.bindPopup("<button onClick=\"afficher("+lat+","+lng+")\">  Modifier  </button>  <button onClick=\"supprimer()\">  Supprimer  </button>");



   
}

	mymap.on('dblclick', ajoutpoint);




function afficher(lat,lng){
  //recuperer les données du point grâce a la base de données
  //var ovni = database.(lat,lng);
  $( "#date").val();
  $( "#time").val();
  $( "#area").val();
  $( "#shape").val();
  $( "#duration").val();
  $( "#comments").val();
}

function supprimer(){

	mymap.removeLayer(mar);      
}



function ajouterLesPoints(pts){
	
	for (var i = 0;  i<pts.length ;i++ ) {
		
		var lat=pts[i].latitude;
		var lng=pts[i].longitude;

		mar=L.marker([lat,lng]).addTo(mymap);

   //console.log(mar);
   mar.bindPopup("<button onClick=\"afficher("+lat+","+lng+")\">  Modifier  </button>  <button onClick=\"supprimer()\">  Supprimer  </button>");

		
		

	}
	console.log("oj");


	
}




</script>


</body>
</html>